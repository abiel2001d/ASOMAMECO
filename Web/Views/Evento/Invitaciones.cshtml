@model Infraestructura.Model.Evento

@{
    ViewBag.Title = "Invitaciones";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container">

    <p class="text-center mt-3">
        <button class="btn btn-primary" id="send-invitation-button">Enviar Invitaciones</button>
    </p>
    <div class="card mb-3">
        <div class="card-header">
            <h5>@Model.Nombre_Evento</h5>
        </div>
        <div class="card-body">
            <p><strong>Fecha del Evento:</strong> @Model.Fecha_Evento.ToString("dd/MM/yyyy")</p>
            <p><strong>Lugar:</strong> @Model.Lugar</p>
            <p><strong>Descripción:</strong> @Model.Descripcion</p>
        </div>
    </div>



    <h3>Lista de invitaciones</h3>
    <table class="table table-hover">
        <thead class="thead-light">
            <tr>
                <th>Nombre</th>
                <th>Cédula</th>
                <th>Estado</th>
            </tr>
        </thead>
        <tbody>

            <tr>
                <td colspan="3">No hay invitaciones enviadas aún.</td>
            </tr>

        </tbody>
    </table>
</div>

<script>
    document.getElementById("send-invitation-button").addEventListener("click", function() {
        var eventId = @Model.ID_Evento;
        $.ajax({
            url: '@Url.Action("EnviarInvitaciones", "Evento")/' + eventId,
            type: 'POST',
            success: function(result) {
                if (result.success) {
                    alert("Invitaciones enviadas!");
                } else {
                    alert("Error al enviar invitaciones.");
                }
            },
            error: function() {
                alert("Error al enviar invitaciones.");
            }
        });
    });
</script>

<style>
    .card-body p {
        margin: 5px 0;
    }

    .text-center {
        text-align: center;
    }
</style>
